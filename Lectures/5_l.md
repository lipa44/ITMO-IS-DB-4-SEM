# Лекция 5

> Бекап данных

Реляционная модель имеет критерии, выполнение которых обеспечивают её целостность.

# Реляционная алебра (базис)

## Основы алгебры

1. Объект и его формальное определение
2. Операции над этими объектами
3. Законы

В реляционной алгебре **объектом** _(имеющего аттрибуты)_ является **отношение**

Реляционная алгебра - **замкнутая** алгебра (результатом всегда является отношение).

## Операции

### Унарные

1. Проекция - `П_{a_1, a_2, a_3, ..., a_n}(R)`

**Проекция** (`SELECT`) - это операция, которая определяет новое отношение, содержащее вертикальном подмножество исходного отношения, создоваемое посредством извлечения значений указанных аттрибутов и исключения из резуьтата строк-дубликатов.

2. Выборка - `S_{предикат}(R)`

**Выборка** (`WHERE`) - это операция, которая определяет результирующее отношение, которое содержит только те кортежи из исходного отношения, которые удовлетворяют заданному условию _(предикату)_.

### Бинарные

3. Объединение - `R u S`

**Объединение** (`UNION`) - это операция над отношениями R и S, определяющая **новое** отношение, которое включает все кортежи, содержащиеся только в R, все кортежи, содержащиеся только в S и кортежи, содержащиеся одновременно в R и S с исключением дубликатов.

> Объединение возможно только, если отношения совместимы, и обычно объединение считается **опасной операцией**

**Совместимость по объединению** - два отошения R и S будут совместимы по объединению, когда они состоят из одинакового кол-ва аттрибутов, и каждая пара соответствующих аттрибутов будет иметь одинаковый домен.

4. Разность - `R - S`

**Разность** - это отношение, состоящее из кортежей, которые есть в отношении R, но отсутствуют в отношении S

> Данная операция требует, чтобы отношения были совместимы по объекдинению

5. Пересечение - `R ^ S`

**Пересечение** - это отношение, которое определяет кортежи, присутствующие в обоих отношениях одновременно

### Небинарные

6. Декартово произведение - `R x S`

**Декартово произведение** - определяет новое отношение, которое является результатом конкатенаци каждого кортежа из отношения R с каждым кортежем из отношения S.

7. Тета-соединение - `R _f S`, где `f = R * a_i (Theta) S * b_i, (Theta) = { <, <=, =, >, >= }`

**Тета-соединение** (``) - определяет новое отношение, которое содержит кортежи из декартова произведения отношений R и S, удовлетворяющие предикату f

___

> Дополнительные операции, не реализованные в `SQL`

8. Экви-соединение

**Экви-соединение** - это тета-соединение, где (theta) - это операция равно

9. Естественное соединение - `R _ S`

**Естественное соединение** - это соединение по эквивалентности двух отношений, выполненное по всем общим аттрибутам, из результатов которого исключается по одному экземпляру каждого общего аттрибута.

10. Левое внешнее соединение - ``

**Левое внешнее соединение** - это тета-соединение, при котором в результирующее отношение включаются также кортежи отношения R, не имеющие совпадающих значений в общих столбцах отношения S.

11. Полу-соединение

**Полу-соединение** - определяет отношение, содержащее только те кортежи из R, которые входят в соединение R и S

## Практическое применение SQL

### Как выглядит SELECT

```sql
SELECT [DISTINCT | ALL] { * | [ColumsExpression [AS NewName], ... ] }
FROM TableName [AS NewName]
    [ { INNER | LEFTOUTER | FULL } JOIN ] TasbeName2 [AS NewName]
    ON condition ]
[ WHERE condition ]
[ GROUP BY ColumnList ]
[ HAVING condition ]
[ ORDER BY ColumnList [ ASC | DESC ]]
```

### Последовательность выполнения SELECT

1. `FROM`
2. `JOIN ... ON`
3. `WHERE`
4. `GROUP BY`
5. `HAVING`
6. `SELECT`
7. `DISTINCT`
8. `ORDER BY`
