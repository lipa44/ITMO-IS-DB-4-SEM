# Лекция 12

# Введение

Попытки построить распределённые системы натыкались на некоторые трудности:

1. **Consistency** - Сложность обеспечивания консистентности данных (согласованность данных)
    - Приходится делать блокировки -> это противоречит консистентности

2. **Availability** - Доступность

3. **Partition tolerance** - Устойчивость к распределению

Решением данной проблемы (всех 3-х свойств) стало утверждение Брюе о том, что выполнить все 3 данных свойства просто невозможно

# CAP Теорема

В распределённой информационной системы возможно обеспечить не более двух из перечисленных свойств _(Consistency, Availability, Partition tolerance)_

## Целостность

- Во всех узлах в один момент времени данные не противоречат друг другу

- Два запроса в один момент времени к двум разным узлам, то результат выполнения обоих откликов будет одинаков

> Одинаковые результаты с любого узла в один момент времени

## Доступность

- Любой запрос к распределённой системе завершаеся корректным откликом в пределах заданного интервала времени, однако без гарантии, что отклики от всех узлов совпадут

## Устойчивость к распределению

- Расщепление распределённой системы на несколько изолированных секций не приводит к некоррекности отклика от каждой из секций

> CAP - треугольник

> Все реляционные БД - это CA-системы

## Различные комбинации свойств CAP (NoSQL решения)

### Key-Value DB (Cassandra)

> Не храним отношения

Есть только 3 операции:

1. Insert (Key-Value)
2. Find (Key)
3. Remove (Key)

### Document-oriented DB (MongoDB)

> В качестве ключа обычно хранится значение, а вот в качестве значения уже хранится какая-то более сложная структура (Json, XML)

### Column-based DB

> Каждакя колонка какого-то отношения хранится фактически как отдельная таблица

### Graph DB

> У узлов есть атрибуты, у связей тоже есть атрибуты